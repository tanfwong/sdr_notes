

<!DOCTYPE html>


<html >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2.2. Elementary Multi-threading &#8212; Digital Communications with SDRs</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ch2/multithread';</script>
    <link rel="shortcut icon" href="../_static/logo.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2.3. References and further reading" href="prelims_exs.html" />
    <link rel="prev" title="2.1. UHD" href="uhd.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Digital Communications with Software Defined Radios
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ch1/introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="prelims.html">2. Some Programming Prelims</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="uhd.html">2.1. UHD</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">2.2. Elementary Multi-threading</a></li>
<li class="toctree-l2"><a class="reference internal" href="prelims_exs.html">2.3. References and further reading</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch3/filter.html">3. Multi-rate Filtering</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch3/fftw3.html">3.1. FFTW3 Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch3/overlapsave.html">3.2. Overlap Save Algorithm</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch3/multirate.html">3.3. Multi-rate Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch3/polyphase.html">3.4. Polyphase Filtering</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch3/filter_exs.html">3.5. References and further reading</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch4/part15.html">4. Digest of FCC Regulations Part 15</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch5/usrp.html">5. USRP Tuning and Calibration</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch5/tuning.html">5.1. Frequency Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/iq.html">5.2. DC Offset and IQ Imbalance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch5/usrp_refs.html">5.3. References and further reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch6/signal.html">6. Signal Generation and Capture</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch6/generate.html">6.1. TX Pulse Shaping</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/capture.html">6.2. RX Signal Capture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch6/signal_refs.html">6.3. References and further reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch7/sync.html">7. Signal Acquisition and Synchronization</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-5"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch7/dll.html">7.1. Closed-Loop Symbol Synchronization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/acq.html">7.2. Signal Acquisition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/signature.html">7.3. Signature Signal Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/mseq.html">7.4. Maximal-length Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/zc.html">7.5. Zadoff–Chu Sequences</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch7/sync_refs.html">7.6. References and further reading</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch8/noncoh.html">8. Non-coherent Demodulation</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-6"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch8/mlnoncoh.html">8.1. Maximum Likelihood Non-coherent Demodulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/ask.html">8.2. <span class="math notranslate nohighlight">\(M\)</span>-ary Amplitude Shift Keying (<span class="math notranslate nohighlight">\(M\)</span>-ASK)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/dpsk.html">8.3. <span class="math notranslate nohighlight">\(M\)</span>-ary Differential Phase Shift Keying (<span class="math notranslate nohighlight">\(M\)</span>-DPSK)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch8/noncoh_usrp.html">8.4. USRP Implementation</a></li>

</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch9/carrier.html">9. Carrier Synchronization</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-7"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch9/mlest.html">9.1. Basic Model</a></li>

<li class="toctree-l2"><a class="reference internal" href="../ch9/dd_pll.html">9.3. Decision-directed Phase-locked Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/ndd_pll.html">9.4. Non-decision-directed Phase-locked Loop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch9/carrier_refs.html">9.5. References and further reading</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ch10/coh.html">10. Coherent Demodulation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../ch11/arq.html">11. Automatic Repeat Request</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-8"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../ch11/crc.html">11.1. Cyclic Redundancy Check Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/protocols.html">11.2. Simple ARQ Protocols</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/duplex.html">11.3. Duplex Transmission using USRPs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch11/arq_exs.html">11.4. References and further reading</a></li>

</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/tanfwong/sdr_notes" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/tanfwong/sdr_notes/issues/new?title=Issue%20on%20page%20%2Fch2/multithread.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/ch2/multithread.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Elementary Multi-threading</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-launch-and-join-threads">2.2.1. Create, launch, and join threads</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uhd-thread-priority">2.2.2. UHD thread priority</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-synchronization-with-mutex">2.2.3. Thread synchronization with mutex</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-locking">2.2.3.1. Internal locking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caller-ensured-locking">2.2.3.2. Caller-ensured locking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-caller-ensured-locking">2.2.3.3. Internal + Caller-ensured locking</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#passing-information-signal-between-threads-using-atomic-objects">2.2.4. Passing information/signal between threads using atomic objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-safe-fifo-queue">2.2.5. Thread-safe FIFO queue</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="elementary-multi-threading">
<span id="sec-multithread"></span><h1><span class="section-number">2.2. </span>Elementary Multi-threading<a class="headerlink" href="#elementary-multi-threading" title="Permalink to this headline">#</a></h1>
<ul>
<li><p>To implement a communication system in software, we often need to
run functions that send and/or receive signal samples to and/or from
the USRP as well as many other processing functions asynchronously
and simultaneously.</p></li>
<li><p>This can be done by multi-threaded programming, in which different
functions are implemented in different threads. Exactly how many
treads to use and which functions should be implemented in which
threads are typical design questions.</p></li>
<li><p>Multi-threading imposes overheads. If you are pushing the CPU to its
limits and concern about overheads, a common rule of thumb is to
have the maximum number of simultaneous CPU-hogging threads to be
roughly the same as the number of processors (or cores)
available. In our Linux boxes, all the processors contain 4 cores
with hyper-threading support. Hence the maximum of number of
simultaneous CPU-hogging threads should be about 8.</p></li>
<li><p>Generally we should have a main thread, the one starts <code class="docutils literal notranslate"><span class="pre">main()</span></code>, and
other spawned threads. We will use the
<a class="reference external" href="http://www.cplusplus.com/reference/thread/thread/"><code class="docutils literal notranslate"><span class="pre">std::thread</span></code></a>
class to create, launch, and manage threads.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p><code class="docutils literal notranslate"><span class="pre">std::thread</span></code> is available in C++11 or after.</p>
</div>
<div class="admonition-dig-deeper admonition">
<p class="admonition-title">Dig deeper</p>
<p>You may also use the somewhat more powerful
<a class="reference external" href="https://www.boost.org/doc/libs/1_74_0/doc/html/thread.html">Boost.Thread</a>
library to do multi-threading.</p>
</div>
</li>
</ul>
<section id="create-launch-and-join-threads">
<h2><span class="section-number">2.2.1. </span>Create, launch, and join threads<a class="headerlink" href="#create-launch-and-join-threads" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>The simplest way to create and launch a thread is to instantiate a
<code class="docutils literal notranslate"><span class="pre">std::thread</span></code> class object by passing to its constructor a function
reference pointing to the function that the thread is to
execute. Other input arguments of the function can also be passed to
the constructor. See the code example below.</p></li>
<li><p>After a thread’s job is completed, we should <strong>join</strong> the thread back to
the main thread for clean termination. This is done by the using
<code class="docutils literal notranslate"><span class="pre">std::thread::join()</span></code> method, which will block the calling thread
until the thread represented by the thread object has terminated. To
make sure that a thread can be joined, we may check if the thread is
<em>joinable</em> using the <code class="docutils literal notranslate"><span class="pre">std::thread::joinable()</span></code> method. A thread is
not joinable if it has been already joined or detached.</p></li>
<li><p>One may use the namespace <code class="docutils literal notranslate"><span class="pre">std::this_thread</span></code> to invoke a set of
functions that access the current thread. For example, calling the
<code class="docutils literal notranslate"><span class="pre">std::this_thread::sleep_for()</span></code> method will cause the current thread
to pause for a specified amount of time. We should always try to do
that whenever possible in a thread to vacate CPU resources to other
running threads.</p></li>
<li><p><u>Example</u>: <a class="reference internal" href="age_threads.html#code-age-threads"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">age_threads.cpp</span></code></span></a></p></li>
</ul>
</section>
<section id="uhd-thread-priority">
<h2><span class="section-number">2.2.2. </span>UHD thread priority<a class="headerlink" href="#uhd-thread-priority" title="Permalink to this headline">#</a></h2>
<ul>
<li><p>The priority of the main thread can be set using the
<code class="docutils literal notranslate"><span class="pre">uhd::set_thread_priority_safe()</span></code> method in <code class="docutils literal notranslate"><span class="pre">main()</span></code>. The same
method can be used to set the thread priority in the function that a
spawned thread executes. The <code class="docutils literal notranslate"><span class="pre">uhd::set_thread_priority_safe()</span></code>
method is a UHD wrapper to set thread priority using
<a class="reference external" href="https://computing.llnl.gov/tutorials/pthreads/">Pthreads</a> in
UNIX-based systems. The <code class="docutils literal notranslate"><span class="pre">gcc</span></code> compiler, in most of such systems,
implements the <code class="docutils literal notranslate"><span class="pre">std::thread</span></code> class based on Pthreads. Hence, you may
also use the same method to set priority of threads that you create
using <code class="docutils literal notranslate"><span class="pre">std::thread</span></code>. This also applies if you use the Boost.Thread
library instead.</p></li>
<li><p>The two input parameters of <code class="docutils literal notranslate"><span class="pre">uhd::set_thread_priority_safe()</span></code> are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">priority</span></code>: a <code class="docutils literal notranslate"><span class="pre">float</span></code> in [0,1] with 0 and 1 respectively meaning lowest and highest priority for the thread (default = 0.5)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">realtime</span></code>: a <code class="docutils literal notranslate"><span class="pre">bool</span></code> specifying whether real-time scheduling should be enabled or not (default = <code class="docutils literal notranslate"><span class="pre">true</span></code>)</p></li>
</ul>
</li>
<li><p>Setting <code class="docutils literal notranslate"><span class="pre">priority</span></code> to 1 and <code class="docutils literal notranslate"><span class="pre">realtime</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> typically gives the thread
highest priority. This is what we want to do for threads that
implement time-critical processing, such as sending samples from the
host to the USRP and grabbing samples back to the host from the
USRP.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Real-time scheduling means a certain way to
schedule a fair and constant access to the CPU. Such a restriction
may not necessarily reduce the run time of a program.</p>
</div>
</li>
<li><p><u>Example</u>: <a class="reference internal" href="age_threads.html#code-age-threads"><span class="std std-ref">age_threads.cpp</span></a></p></li>
</ul>
</section>
<section id="thread-synchronization-with-mutex">
<h2><span class="section-number">2.2.3. </span>Thread synchronization with mutex<a class="headerlink" href="#thread-synchronization-with-mutex" title="Permalink to this headline">#</a></h2>
<ul>
<li><p>If you run <a class="reference internal" href="age_threads.html#code-age-threads"><span class="std std-ref">age_threads.cpp</span></a>, the console printout
is not what you have expected. Despite the messages printed out by
different threads sometimes come out cleanly, they often garble
together. This is because the threads are running asynchronously
without regard of the existence of each other. The characters of the
message strings from different threads may be put into the buffer of
<code class="docutils literal notranslate"><span class="pre">std::cout</span></code> by the respective <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> operators in the threads in some
unpredictable order, garbling the output.</p></li>
<li><p>The situation can be worse when multiple threads are writing to the
same memory location that holds a pointer to an object. A race
condition may occur and the content of memory location may become
unpredictable. Any subsequent reference to the object may cause the
program to crash! The technical terminology to describe this situation is that
such an implementation is not <strong>thread-safe</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Strictly speaking, both <code class="docutils literal notranslate"><span class="pre">std::cout</span></code> and the <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> operator are
thread-safe because the implementation indeed prevents multiple
threads from writing to the buffer of <code class="docutils literal notranslate"><span class="pre">std::cout</span></code>
simultaneously. In fact,  <a class="reference internal" href="age_threads.html#code-age-threads"><span class="std std-ref">age_threads.cpp</span></a>
doesn’t crash. However, this thread-safe property applies only on a
character-by-character basis; hence we still have the messages from
different threads garbled together.</p>
</div>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p><strong>Neither <code class="docutils literal notranslate"><span class="pre">uhd::tx_streamer::send()</span></code> nor
<code class="docutils literal notranslate"><span class="pre">uhd::rx_streamer::recv()</span></code> is thread-safe.</strong></p>
</div>
</li>
<li><p>In order to make <a class="reference internal" href="age_threads.html#code-age-threads"><span class="std std-ref">age_threads.cpp</span></a> work in the way
that we want it to, we need to provide a form of synchronization among
all the threads such that a thread can get exclusive access to
<code class="docutils literal notranslate"><span class="pre">std::cout</span></code>, blocking other threads from using <code class="docutils literal notranslate"><span class="pre">std::cout</span></code> before
the thread is done streaming its whole message to <code class="docutils literal notranslate"><span class="pre">std::cout</span></code>.</p></li>
<li><p><strong>Mutexes</strong> provide a basic mechanism for achieving this form of
synchronization among threads. We will use the <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code> class to
construct mutexes.</p>
<div class="admonition-dig-deeper admonition">
<p class="admonition-title">Dig deeper </p>
<p>You may also use the somewhat more versatile <code class="docutils literal notranslate"><span class="pre">boost::mutex</span></code> class from the
<a class="reference external" href="https://www.boost.org/doc/libs/1_74_0/doc/html/thread.html">Boost.Thread</a>
library.</p>
</div>
</li>
<li><p>There are many ways to use mutexes for thread synchronization.
The following three simple ways are pretty much all needed for most
of our purposes.</p>
<div class="admonition-dig-deeper admonition">
<p class="admonition-title">Dig deeper </p>
<p>See this <a class="reference external" href="http://www.boost.org/doc/libs/1_74_0/doc/html/thread/synchronization.html">tutorial</a>
for a short introduction and <span id="id1">[<a class="reference internal" href="prelims_exs.html#id7" title="Anthony Williams. C++ Concurrency in Action. Manning Publications, 2nd. edition, 2019. ISBN 9781617294693. URL: https://www.manning.com/books/c-plus-plus-concurrency-in-action-second-edition.">1</a>]</span> for a more
detailed treatment.</p>
</div>
</li>
</ul>
<section id="internal-locking">
<h3><span class="section-number">2.2.3.1. </span>Internal locking<a class="headerlink" href="#internal-locking" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Consider</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SharedPrinter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="n">mtx</span><span class="p">;</span>
<span class="w">  </span><span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mtx</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">message</span><span class="p">;</span>
<span class="w">        </span><span class="n">mtx</span><span class="p">.</span><span class="n">unlock</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span><span class="w"> </span>
</pre></div>
</div>
<p>which will be used in place of <code class="docutils literal notranslate"><span class="pre">std::cout</span></code> in
<a class="reference internal" href="age_threads.html#code-age-threads"><span class="std std-ref">age_threads.cpp</span></a></p>
</li>
<li><p>Suppose that a thread calls <code class="docutils literal notranslate"><span class="pre">SharedPrinter::print()</span></code>. The
<code class="docutils literal notranslate"><span class="pre">std::mutex::lock()</span></code> method in <code class="docutils literal notranslate"><span class="pre">SharedPrinter::print()</span></code> gives
ownership of the mutex <code class="docutils literal notranslate"><span class="pre">SharedPrinter::mtx</span></code> to the thread, and
blocks other threads from accessing the object. After the whole
message is streamed to <code class="docutils literal notranslate"><span class="pre">std::cout</span></code>, the method
<code class="docutils literal notranslate"><span class="pre">std::mutex::unlock()</span></code> releases the current thread’s ownership of
the mutex, allowing other threads to access the <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code>
object again. As a result, only one thread can stream a message to
<code class="docutils literal notranslate"><span class="pre">std::cout</span></code> at a time, and no other thread can stream to <code class="docutils literal notranslate"><span class="pre">std::cout</span></code>
until the current thread finishes streaming its whole message.</p></li>
<li><p>Note that <code class="docutils literal notranslate"><span class="pre">std::mutex::lock()</span></code> is a blocking call. It will not return
until the mutex is unlocked by its current owner and the calling
thread obtains ownership of the mutex. The method
<code class="docutils literal notranslate"><span class="pre">std::mutex::try_lock()</span></code> attempts to obtain the mutex’s ownership
for the current thread without blocking and returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if
succeeds.</p></li>
<li><p>One may also use a <strong>scoped lock</strong> in the definition of <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code>
in place of the explicit calling of <code class="docutils literal notranslate"><span class="pre">std::mutex::lock()</span></code> and
<code class="docutils literal notranslate"><span class="pre">std::mutex::lunlock()</span></code>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SharedPrinter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="n">mtx</span><span class="p">;</span>
<span class="w">  </span><span class="k">public</span><span class="o">:</span><span class="w"> </span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scoped_lock</span><span class="p">(</span><span class="n">mtx</span><span class="p">);</span><span class="w"> </span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">message</span><span class="p">;</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>The object <code class="docutils literal notranslate"><span class="pre">scoped_lock</span></code>’s constructor and destructor locks and
releases the mutex, respectively.</p>
</li>
<li><p>Example code showing how to use <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code>:
<a class="reference internal" href="age_mutex.html#code-age-mutex"><span class="std std-ref">age_mutex.cpp</span></a></p></li>
</ul>
</section>
<section id="caller-ensured-locking">
<h3><span class="section-number">2.2.3.2. </span>Caller-ensured locking<a class="headerlink" href="#caller-ensured-locking" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>Consider the following implementation of the <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code> class:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SharedPrinter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="n">mtx</span><span class="p">;</span>
<span class="w">  </span><span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">message</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">lock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mtx</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">unlock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mtx</span><span class="p">.</span><span class="n">unlock</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span><span class="w"> </span>
</pre></div>
</div>
<p>where the mutex locking and unlocking methods are exposed to the caller
function.  The class method <code class="docutils literal notranslate"><span class="pre">SharedPrinter::print()</span></code> is <strong>not</strong> thread-safe
and the caller is responsible for blocking other threads from
accessing it.</p>
</li>
<li><p>Example code showing how to use this caller-ensured locking version
of <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code>: <a class="reference internal" href="age_mutex_caller.html#code-age-mutex-caller"><span class="std std-ref">age_mutex_caller.cpp</span></a></p></li>
</ul>
</section>
<section id="internal-caller-ensured-locking">
<h3><span class="section-number">2.2.3.3. </span>Internal + Caller-ensured locking<a class="headerlink" href="#internal-caller-ensured-locking" title="Permalink to this headline">#</a></h3>
<ul>
<li><p>We may obtain the best of both methods above by the following
implementation of the <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code> class:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">SharedPrinter</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="w"> </span><span class="n">mtx</span><span class="p">;</span>
<span class="w">  </span><span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">print</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">lock_guard</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">recursive_mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">scoped_lock</span><span class="p">(</span><span class="n">mtx</span><span class="p">);</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">message</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">lock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mtx</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">unlock</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mtx</span><span class="p">.</span><span class="n">unlock</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
<p>where the class method <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span> <span class="pre">::print()</span></code> is now thread-safe.</p>
</li>
<li><p>Note that we have to use <code class="docutils literal notranslate"><span class="pre">std::recursive_mutex</span></code> in this implementation
to allow for the possibility of the same mutex being locked
repeatedly, internally and by the caller.</p></li>
<li><div class="hint admonition">
<p class="admonition-title">Experiment</p>
<ol class="arabic">
<li><p>Use this new implementation of <code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code> in
<a class="reference internal" href="age_mutex_caller.html#code-age-mutex-caller"><span class="std std-ref">age_mutex_caller.cpp</span></a>. Compile and run
your modified code to observe the results.</p></li>
<li><p>Instead of <code class="docutils literal notranslate"><span class="pre">std::recursive_mutex</span></code> in the implementation of
<code class="docutils literal notranslate"><span class="pre">SharedPrinter</span></code> above, use <code class="docutils literal notranslate"><span class="pre">std::mutex</span></code> to construct the scoped
lock. Compile and test the resulting code. Explain what happens.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If the program hangs, don’t panic. You may press CTRL-Z to stop
it. Then run <code class="docutils literal notranslate"><span class="pre">ps</span></code> to find out its process number and <code class="docutils literal notranslate"><span class="pre">kill</span> <span class="pre">-9</span> <span class="pre">&lt;process</span> <span class="pre">number&gt;</span></code> to remove it.</p>
</div>
</li>
</ol>
</div>
</li>
</ul>
</section>
</section>
<section id="passing-information-signal-between-threads-using-atomic-objects">
<h2><span class="section-number">2.2.4. </span>Passing information/signal between threads using atomic objects<a class="headerlink" href="#passing-information-signal-between-threads-using-atomic-objects" title="Permalink to this headline">#</a></h2>
<ul>
<li><p>Information and data may be passed between threads via shared
objects. The methods to access these shared objects should be
thread-safe. That can be achieved by employing the mutex-based
techniques discussed before.</p></li>
<li><p>When we want to share a variable of fundamental type, such as
<code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">float</span></code>, and <em>etc</em>, we may effectively achieve
locking by declaring the variable as <code class="docutils literal notranslate"><span class="pre">atomic</span></code> using the
<code class="docutils literal notranslate"><span class="pre">std::atomic&lt;&gt;</span></code> template. An <em>atomic object</em> is free from data races.
If one thread writes to an atomic object while another thread reads
from it, the behavior is well-defined.</p></li>
<li><p>The basic methods to write to and read from an atomic variable are
<code class="docutils literal notranslate"><span class="pre">std::atomic::store()</span></code> and <code class="docutils literal notranslate"><span class="pre">std::atomic::load()</span></code>, respectively. One
may also use the <code class="docutils literal notranslate"><span class="pre">=</span></code> operator in place of
<code class="docutils literal notranslate"><span class="pre">std::atomic::store()</span></code>. Other operators, such as <code class="docutils literal notranslate"><span class="pre">++</span></code> and <code class="docutils literal notranslate"><span class="pre">--</span></code>, and
operation methods are also available for atomic objects. See
<a class="reference external" href="https://www.cplusplus.com/reference/atomic/atomic/">this link</a> for
details.</p>
<div class="admonition-dig-deeper admonition">
<p class="admonition-title">Dig deeper </p>
<p>An atomic object may be used to synchronize access to other
non-atomic objects near it in different threads by specifying
different memory orders. See <span id="id2">[<a class="reference internal" href="prelims_exs.html#id7" title="Anthony Williams. C++ Concurrency in Action. Manning Publications, 2nd. edition, 2019. ISBN 9781617294693. URL: https://www.manning.com/books/c-plus-plus-concurrency-in-action-second-edition.">1</a>]</span> for details. By
default, <code class="docutils literal notranslate"><span class="pre">std::atomic::store()</span></code> and <code class="docutils literal notranslate"><span class="pre">std::atomic::load()</span></code> employ the
strictest memory order. The <code class="docutils literal notranslate"><span class="pre">=</span></code> operator is equivalent to
<code class="docutils literal notranslate"><span class="pre">std::atomic::store()</span></code> with the strictest memory order.</p>
</div>
</li>
<li><p>One may also use atomic objects to pass signals from one thread to
others in order to trigger their operations.</p></li>
<li><p><u>Example:</u> <a class="reference internal" href="count_atomic.html#code-count-atomic"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">count_atomic.cpp</span></code></span></a></p>
<div class="admonition-dig-deeper admonition">
<p class="admonition-title">Dig deeper </p>
<p>A more sophisticated, CPU-efficient way to pass signals between
threads is to use mutexes together with condition variables. See
this
<a class="reference external" href="https://www.cplusplus.com/reference/condition_variable/condition_variable/">simple example </a>
and <span id="id3">[<a class="reference internal" href="prelims_exs.html#id7" title="Anthony Williams. C++ Concurrency in Action. Manning Publications, 2nd. edition, 2019. ISBN 9781617294693. URL: https://www.manning.com/books/c-plus-plus-concurrency-in-action-second-edition.">1</a>]</span> for a more detailed exploration.</p>
</div>
</li>
</ul>
</section>
<section id="thread-safe-fifo-queue">
<h2><span class="section-number">2.2.5. </span>Thread-safe FIFO queue<a class="headerlink" href="#thread-safe-fifo-queue" title="Permalink to this headline">#</a></h2>
<ul class="simple">
<li><p>We will often encounter the common scenario in which the output
generated by a thread needs to be passed on to another thread for
further processing. Since all threads are running asynchronously, we
need to provide thread-safe buffering between the data-generating
(producer) and data-receiving (consumer) threads.</p></li>
<li><p>A simple example of such thread-safe buffering is the FIFO queue
implemented in the <code class="docutils literal notranslate"><span class="pre">MutexFIFO</span></code> class template defined in the header
file <a class="reference internal" href="queue.html#code-queue"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">queue.hpp</span></code></span></a>.</p></li>
<li><p><u>Example code</u> that shows how to use this FIFO
queue: <a class="reference internal" href="age_fifo.html#code-age-fifo"><span class="std std-ref">age_fifo.cpp</span></a></p></li>
<li><p>One should make sure that the arrival rate to the FIFO queue should
be smaller than its service rate. Otherwise the size of the queue
will grow and eventually cause memory problems.</p></li>
</ul>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./ch2"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="uhd.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">2.1. </span>UHD</p>
      </div>
    </a>
    <a class="right-next"
       href="prelims_exs.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">2.3. </span>References and further reading</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-launch-and-join-threads">2.2.1. Create, launch, and join threads</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#uhd-thread-priority">2.2.2. UHD thread priority</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-synchronization-with-mutex">2.2.3. Thread synchronization with mutex</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-locking">2.2.3.1. Internal locking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#caller-ensured-locking">2.2.3.2. Caller-ensured locking</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#internal-caller-ensured-locking">2.2.3.3. Internal + Caller-ensured locking</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#passing-information-signal-between-threads-using-atomic-objects">2.2.4. Passing information/signal between threads using atomic objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#thread-safe-fifo-queue">2.2.5. Thread-safe FIFO queue</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Tan F. Wong
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2016-2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>